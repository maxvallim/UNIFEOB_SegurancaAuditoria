<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Desafio: Gerenciador de Senhas Seguro com Hashes</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: white;
            color: black;
            margin: 40px;
            line-height: 1.6;
        }
        h1, h2 {
            border-bottom: 2px solid black;
            padding-bottom: 5px;
        }
        pre {
            background-color: #f4f4f4;
            padding: 10px;
            border-left: 5px solid black;
            overflow-x: auto;
        }
        .highlight {
            font-weight: bold;
            color: #444;
        }
    </style>
</head>
<body>
    <h1>Desafio: Gerenciador de Senhas Seguro com Hashes</h1>
    
    <h2>Objetivo do Desafio</h2>
    <p>Seu desafio √© desenvolver um **sistema seguro de gerenciamento de senhas** utilizando **hashes com salt** e armazenando as credenciais em **SQLite**.</p>
    
    <h2>Passo 1: Criando a Base de Dados</h2>
    <p>Antes de cadastrar usu√°rios, devemos criar um banco de dados para armazenar as senhas de forma protegida.</p>
    
    <pre>
import sqlite3

# Criar banco de dados SQLite
conexao = sqlite3.connect("usuarios.db")
cursor = conexao.cursor()

cursor.execute("""
    CREATE TABLE IF NOT EXISTS usuarios (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        username TEXT UNIQUE,
        senha_hash TEXT,
        salt TEXT
    )
""")
conexao.commit()
cursor.close()
conexao.close()
    </pre>

    <h2>Passo 2: Cadastrando Usu√°rios com Hash e Salt</h2>
    <p>Implemente a fun√ß√£o de **cadastro de usu√°rios**, gerando um **salt aleat√≥rio** e armazenando o **hash da senha**.</p>
    
    <pre>
import hashlib
import os
import sqlite3

def gerar_hash_senha(senha):
    salt = os.urandom(16).hex()  # Salt aleat√≥rio
    senha_com_salt = senha + salt
    senha_hash = hashlib.sha256(senha_com_salt.encode()).hexdigest()
    return senha_hash, salt

def cadastrar_usuario(username, senha):
    conexao = sqlite3.connect("usuarios.db")
    cursor = conexao.cursor()

    senha_hash, salt = gerar_hash_senha(senha)
    cursor.execute("INSERT INTO usuarios (username, senha_hash, salt) VALUES (?, ?, ?)", (username, senha_hash, salt))
    conexao.commit()
    print(f"‚úÖ Usu√°rio {username} cadastrado com sucesso!")

    cursor.close()
    conexao.close()

# Teste de cadastro
cadastrar_usuario("max", "senha_super_secreta")
    </pre>

    <h2>Passo 3: Autenticando Usu√°rios</h2>
    <p>Agora implemente uma fun√ß√£o para **verificar senhas**, comparando o hash gerado com o armazenado no banco de dados.</p>

    <pre>
def autenticar_usuario(username, senha):
    conexao = sqlite3.connect("usuarios.db")
    cursor = conexao.cursor()
    
    cursor.execute("SELECT senha_hash, salt FROM usuarios WHERE username = ?", (username,))
    resultado = cursor.fetchone()
    
    if resultado:
        senha_hash_armazenado, salt_armazenado = resultado
        senha_teste = hashlib.sha256((senha + salt_armazenado).encode()).hexdigest()
        
        if senha_teste == senha_hash_armazenado:
            print("‚úÖ Acesso permitido!")
        else:
            print("‚ùå Senha incorreta!")
    else:
        print("‚ùå Usu√°rio n√£o encontrado.")

    cursor.close()
    conexao.close()

# Teste de autentica√ß√£o
autenticar_usuario("max", "senha_super_secreta")
    </pre>

    <h2>Passo 4: Melhorias Extras</h2>
    <p>Ap√≥s implementar o b√°sico, tente aprimorar seu sistema:</p>
    <ul>
        <li>‚úÖ Adicione crit√©rios de senha forte (m√≠nimo de caracteres, s√≠mbolos e n√∫meros).</li>
        <li>‚úÖ Crie um sistema de **recupera√ß√£o de senha** baseado em hashes e tokens.</li>
        <li>‚úÖ Integre com uma **interface web** para cadastro e login.</li>
    </ul>

    <h2>Moral da Hist√≥ria</h2>
    <p>O uso de **hashes** e **salts** protege senhas contra ataques de for√ßa bruta e vazamentos de dados. Esse m√©todo √© essencial em qualquer sistema que manipula informa√ß√µes sens√≠veis.</p>

    <h2>Conclus√£o</h2>
    <p>Agora √© sua vez! Desenvolva o gerenciador de senhas seguro e implemente melhorias para tornar seu sistema **mais robusto e seguro**. üöÄ</p>

</body>
</html>